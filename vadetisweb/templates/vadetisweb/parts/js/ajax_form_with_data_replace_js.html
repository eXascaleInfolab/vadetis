<!-- BEGIN AJAX FORM JS -->
<script type="text/javascript">
function ajaxSubmit(formData, formid) {
    clearFormErrors(formid);
    clearMessages();
    $.post({
        url: $(formid).attr('action'),
        data: new FormData(formData),
        type: $(this).attr('method'),
        enctype: $(this).attr('enctype'),
        processData: false,
        contentType: false,
        success: function (data, status, xhr) {
            handleRedirect(xhr);
            handleMessages(data);
            var new_form_inner = $(data).filter('#'+formid).html();
            $('#'+formid).html(new_form_inner);
        },
        error: function (data, status, xhr) {
            handleMessages(data);
            console.error("Sending asynchronous failed");
        }
    });
}
</script>
<!-- END AJAX FORM JS -->
