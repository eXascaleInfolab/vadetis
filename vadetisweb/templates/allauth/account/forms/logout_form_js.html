<!-- BEGIN LOGOUT FORM JS -->
<script type="text/javascript">
    $('#logout_form').on('submit', function(event){
        event.preventDefault();
        $.post({
            url: "{% url 'account_logout' %}",
            headers: {"X-CSRFToken": '{{ csrf_token }}' },
            type: "POST",
            contentType: "application/x-www-form-urlencoded",
            dataType: "text",
            success: function (data, status, xhr) {
                var json = JSON.parse(data);
                if(json.hasOwnProperty('location')){
                    window.location = json.location;
                }
            },
            error: function (data, status, xhr) {
                console.error("Logout failed");
            }
        });
    });
</script>
<!-- END LOGOUT FORM JS -->